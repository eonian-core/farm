Current network:  bsc_mainnet_prod 6XWYNDVVP61QGT2QCFSCAQ6KQIEPCHFSUU
Generating typings for: 61 artifacts in dir: typechain-types for target: ethers-v5
Successfully generated 192 typings!
Compiled 62 Solidity files successfully
accounts {
  deployer: '0x1a62194f10b1Ec3a44Ad098f15d0845B52FB2195',
  gelatoOps: '0x527a819db1eb0e34426297b03bae11F2f8B3A19E',
  USDT: '0x55d398326f99059fF775485246999027B3197955',
  treasury: '0x1a62194f10b1Ec3a44Ad098f15d0845B52FB2195',
  apeSwap__cUSDT: '0xdBFd516D42743CA3f1C555311F7846095D85F6Fd',
  chainlink__BNB_USD_feed: '0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE',
  chainlink__USDT_USD_feed: '0xB97Ad0E74fa7d920791E90258A6E2085088b4320'
}
network bsc_mainnet_prod
chainId 56
dependencies {}
deploying "Vault_Implementation" (tx: 0x33f8a803fe0f721ed5bc30c749577814c398a434c9050177c09ae9eec9924440)...: deployed at 0xFa0F4920e76d674864d8e37C6cd98c2F1275cF7F with 4823534 gas
deploying "Vault_Proxy" (tx: 0xe3145c66eb48a7f9ed8ec205d0e574c31ca3b9582c0ba631dc934b0073702ed1)...: deployed at 0x7189eF7707d449c895c475a42937926eb793d47B with 430282 gas
accounts {
  deployer: '0x1a62194f10b1Ec3a44Ad098f15d0845B52FB2195',
  gelatoOps: '0x527a819db1eb0e34426297b03bae11F2f8B3A19E',
  USDT: '0x55d398326f99059fF775485246999027B3197955',
  treasury: '0x1a62194f10b1Ec3a44Ad098f15d0845B52FB2195',
  apeSwap__cUSDT: '0xdBFd516D42743CA3f1C555311F7846095D85F6Fd',
  chainlink__BNB_USD_feed: '0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE',
  chainlink__USDT_USD_feed: '0xB97Ad0E74fa7d920791E90258A6E2085088b4320'
}
network bsc_mainnet_prod
chainId 56
dependencies { Vault: '0x7189eF7707d449c895c475a42937926eb793d47B' }
deploying "ApeLendingStrategy_Implementation" (tx: 0xe057227db12333bc99384374e1809a3f86f9fc5687dc293c2d436dc40746d1ac)...: deployed at 0x54a87D647E9707271df6C5F65A5efFb5208CEB5f with 3915474 gas
deploying "ApeLendingStrategy_Proxy" (tx: 0x17250fb29a69b2e075abd70b15ab8fb3960b3524ca55942313cff581bda2fc9a)...: deployed at 0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683 with 654800 gas
Adding strategy to vault
$ hardhat etherscan-verify --license AGPL-3.0 --force-license --solc-input
Current network:  bsc_mainnet_prod
verifying ApeLendingStrategy (0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683) ...
contract ApeLendingStrategy failed to submit : "NOTOK" : "Unable to locate ContractCode at 0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683" [object Object]
verifying ApeLendingStrategy_Implementation (0x54a87D647E9707271df6C5F65A5efFb5208CEB5f) ...
waiting for result...
Failed to verify contract ApeLendingStrategy_Implementation: NOTOK, Fail - Unable to verify. Solidity Compilation Error: Library entry is not a JSON object.
{
  "apikey": "XXXXXX",
  "module": "contract",
  "action": "verifysourcecode",
  "contractaddress": "0x54a87D647E9707271df6C5F65A5efFb5208CEB5f",
  "sourceCode": "...",
  "codeformat": "solidity-standard-json-input",
  "contractname": "src/strategies/ApeLendingStrategy.sol:ApeLendingStrategy",
  "compilerversion": "v0.8.19+commit.7dd6d404",
  "constructorArguements": "0000000000000000000000000000000000000000000000000000000000000001",
  "licenseType": 13
}
Falling back on solcInput. etherscan seems to sometime require full solc-input with all source files, even though this should not be needed. See https://github.com/ethereum/solidity/issues/9573
verifying ApeLendingStrategy_Implementation (0x54a87D647E9707271df6C5F65A5efFb5208CEB5f) ...
waiting for result...
 => contract ApeLendingStrategy_Implementation is now verified
verifying ApeLendingStrategy_Proxy (0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683) ...
waiting for result...
Failed to verify contract ApeLendingStrategy_Proxy: NOTOK, Fail - Unable to verify. Solidity Compilation Error: Library entry is not a JSON object.
{
  "apikey": "XXXXXX",
  "module": "contract",
  "action": "verifysourcecode",
  "contractaddress": "0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683",
  "sourceCode": "...",
  "codeformat": "solidity-standard-json-input",
  "contractname": "@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol:ERC1967Proxy",
  "compilerversion": "v0.8.19+commit.7dd6d404",
  "constructorArguements": "00000000000000000000000054a87d647e9707271df6c5f65a5effb5208ceb5f000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e4c702ee870000000000000000000000007189ef7707d449c895c475a42937926eb793d47b000000000000000000000000dbfd516d42743ca3f1c555311f7846095d85f6fd000000000000000000000000527a819db1eb0e34426297b03bae11f2f8b3a19e0000000000000000000000000567f2323251f0aab15c8dfb1967e4e8a7d42aee000000000000000000000000b97ad0e74fa7d920791e90258a6e2085088b43200000000000000000000000000000000000000000000000000000000000005460000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000",
  "licenseType": 13
}
Falling back on solcInput. etherscan seems to sometime require full solc-input with all source files, even though this should not be needed. See https://github.com/ethereum/solidity/issues/9573
verifying ApeLendingStrategy_Proxy (0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683) ...
waiting for result...
 => contract ApeLendingStrategy_Proxy is now verified
already verified: Vault (0x7189eF7707d449c895c475a42937926eb793d47B), skipping.
verifying Vault_Implementation (0xFa0F4920e76d674864d8e37C6cd98c2F1275cF7F) ...
waiting for result...
Failed to verify contract Vault_Implementation: NOTOK, Fail - Unable to verify. Solidity Compilation Error: Library entry is not a JSON object.
{
  "apikey": "XXXXXX",
  "module": "contract",
  "action": "verifysourcecode",
  "contractaddress": "0xFa0F4920e76d674864d8e37C6cd98c2F1275cF7F",
  "sourceCode": "...",
  "codeformat": "solidity-standard-json-input",
  "contractname": "src/Vault.sol:Vault",
  "compilerversion": "v0.8.19+commit.7dd6d404",
  "constructorArguements": "0000000000000000000000000000000000000000000000000000000000000001",
  "licenseType": 13
}
Falling back on solcInput. etherscan seems to sometime require full solc-input with all source files, even though this should not be needed. See https://github.com/ethereum/solidity/issues/9573
verifying Vault_Implementation (0xFa0F4920e76d674864d8e37C6cd98c2F1275cF7F) ...
waiting for result...
 => contract Vault_Implementation is now verified
already verified: Vault_Proxy (0x7189eF7707d449c895c475a42937926eb793d47B), skipping.
$ hardhat sourcify
Current network:  bsc_mainnet_prod
verifying ApeLendingStrategy (0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683 on chain 56) ...
 => contract ApeLendingStrategy is not verified
verifying ApeLendingStrategy_Implementation (0x54a87D647E9707271df6C5F65A5efFb5208CEB5f on chain 56) ...
 => contract ApeLendingStrategy_Implementation is not verified
verifying ApeLendingStrategy_Proxy (0xbaFc65cb26950709d4BC6Fc44BC290F2df0C3683 on chain 56) ...
 => contract ApeLendingStrategy_Proxy is not verified
verifying Vault (0x7189eF7707d449c895c475a42937926eb793d47B on chain 56) ...
 => contract Vault is not verified
verifying Vault_Implementation (0xFa0F4920e76d674864d8e37C6cd98c2F1275cF7F on chain 56) ...
 => contract Vault_Implementation is not verified
verifying Vault_Proxy (0x7189eF7707d449c895c475a42937926eb793d47B on chain 56) ...
 => contract Vault_Proxy is not verified
$ yarn deploy:export:json && yarn deploy:export:ts
$ hardhat export --export-all './deployments/deployed.json'
Current network:  bsc_mainnet_prod
$ hardhat export --export-all './deployments/deployed.ts'
Current network:  bsc_mainnet_prod
Done in 136.90s.
